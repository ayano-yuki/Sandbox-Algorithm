# 桁DP(Digit DP) 
桁DPは、ある数以下の整数の中で、各桁に関する条件を満たす数を数える動的計画法である。通常のDPとは異なり、「桁ごと」に状態を定義して進めることが特徴となる。

## 概要
### 目的
- 巨大な整数までの数に対して、ある「桁に関する条件」を満たす数の個数や総和などを求める。
- 例えば「0でない桁がちょうどK個」「各桁の和がちょうどS」「3の倍数」「数字の並びが増加している」など、桁ごとの制約を満たす数え上げる。

### キーポイント
- 数値は 文字列で扱う（桁数が非常に大きいため）
- 状態は一般に以下で管理する：
  - `pos`：今見ている桁の位置（左から右）
  - `some_state`：条件に関わる状態（例：非0桁の数、桁の和、使用済み数字など）
  - `tight`：今までの桁がNと一致しているか（True:制限あり / False:自由）
- メモ化再帰 (`@lru_cache`) or 明示的なDPテーブルで高速化

### 計算量
- 状態数：`O(L × 状態サイズ × 2)`（Lは桁数、2はtightの2通り）
- 各状態で試す数字は最大10通り（0〜9）
- 全体で 数千〜数万ステート程度になるため十分高速

### アルゴリズムの流れ
1. 文字列として数値Nを受け取る
    - 大きな整数も桁単位で処理できるようにするため
2. 再帰関数またはDPテーブルを用意
    - `dp(pos, state, tight)` を定義
    - `state` は問題に応じて適切に設計（例：非0桁の数）
3. 各桁で 0〜9 の数字を試す
    - `tight = True` なら `digit ≤ N[pos]`
    - `tight = False` なら `digit ∈ [0,9]` すべて試せる
4. 次の状態に遷移
    - `tight → new_tight`（digitがN[pos]と一致していれば継続、違えば自由状態へ）
    - `state → new_state`（digit ≠ 0 なら非0カウントを増やす等）
5. 末尾（pos == len(N)）に到達したら、条件を満たすかチェックして1または0を返す
6. すべての遷移の合計を答えとして返す

### 参考になりそう
- [桁DP(Digit DP) を考え方から問題例まで徹底解説！ | アルゴリズムロジック](https://algo-logic.info/digit-dp/)
- [【桁DP】ABC154 - E - Almost Everywhere Zero](https://note.com/igasu_7/n/n557ee23a277e)
- [競技プログラミングにおける桁DP問題まとめ - はまやんはまやんはまやん](https://blog.hamayanhamayan.com/entry/2017/04/23/212728)
- [桁 DP の定型化](https://qiita.com/Kiri8128/items/a0786a690232623bd0f6)